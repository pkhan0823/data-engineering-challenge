<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="B2B Machinery Marketplace - Connect with industrial equipment suppliers worldwide">
    <meta name="keywords" content="CNC machines, industrial equipment, B2B marketplace, machinery supplier">
    <title>B2B Machinery Marketplace | Industrial Equipment Supplier</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #4CAF50;
            --danger-color: #f44336;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
        }

        * {
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark-color);
            overflow-x: hidden;
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        @keyframes glow {
            0% {
                box-shadow: 0 0 5px rgba(102, 126, 234, 0.5);
            }
            50% {
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.8);
            }
            100% {
                box-shadow: 0 0 5px rgba(102, 126, 234, 0.5);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        @keyframes rotateIcon {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes floatUp {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        /* ===== HEADER/NAVIGATION ===== */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            animation: slideInDown 0.8s ease-out;
        }

        .navbar-brand {
            font-size: 24px;
            font-weight: 700;
            color: white !important;
            animation: slideInLeft 0.8s ease-out;
        }

        .navbar-brand i {
            margin-right: 10px;
            animation: rotateIcon 3s infinite;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8) !important;
            transition: all 0.3s;
            font-weight: 500;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: white;
            transition: width 0.3s ease;
        }

        .nav-link:hover {
            color: white !important;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* ===== HERO SECTION ===== */
        .hero {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            animation: pulse 4s infinite;
        }

        .hero h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            animation: fadeInDown 1s ease-out;
            position: relative;
            z-index: 2;
        }

        .hero p {
            font-size: 18px;
            margin-bottom: 30px;
            opacity: 0.9;
            animation: fadeInUp 1.2s ease-out;
            position: relative;
            z-index: 2;
        }

        /* ===== SEARCH SECTION ===== */
        .search-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin: -40px 0 40px 0;
            position: relative;
            z-index: 10;
            animation: scaleIn 0.8s ease-out;
        }

        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            animation: fadeInUp 1.4s ease-out;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid var(--light-color);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
            transform: scale(1.02);
        }

        .search-bar button {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .search-bar button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s;
        }

        .search-bar button:hover::before {
            left: 100%;
        }

        .search-bar button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
        }

        /* ===== FILTERS ===== */
        .filters {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: flex-end;
            animation: fadeInUp 1.6s ease-out;
        }

        .filter-group {
            flex: 1;
            min-width: 180px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-group select {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid var(--light-color);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .filter-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }

        .filter-group select:hover {
            border-color: var(--primary-color);
        }

        /* ===== STATS SECTION ===== */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            animation: scaleIn 0.6s ease-out;
            border-left: 4px solid var(--primary-color);
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
            border-left-color: var(--secondary-color);
            animation: glow 2s infinite;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
            animation: fadeInUp 1s ease-out;
        }

        .stat-label {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ===== PRODUCT GRID ===== */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            animation: fadeInUp 0.6s ease-out backwards;
        }

        .product-card:nth-child(1) { animation-delay: 0.1s; }
        .product-card:nth-child(2) { animation-delay: 0.2s; }
        .product-card:nth-child(3) { animation-delay: 0.3s; }
        .product-card:nth-child(4) { animation-delay: 0.4s; }
        .product-card:nth-child(5) { animation-delay: 0.5s; }
        .product-card:nth-child(6) { animation-delay: 0.6s; }

        .product-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            text-align: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .product-image i {
            font-size: 48px;
            animation: bounce 2s infinite;
        }

        .product-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success-color);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            animation: slideInRight 0.6s ease-out;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .product-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark-color);
            line-height: 1.4;
            min-height: 40px;
            transition: color 0.3s;
        }

        .product-card:hover .product-name {
            color: var(--primary-color);
        }

        .product-supplier {
            font-size: 13px;
            color: #666;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .product-card:hover .product-supplier {
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .product-rating {
            font-size: 12px;
            color: #f39c12;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .product-rating i {
            animation: pulse 1s infinite;
        }

        .product-price {
            font-size: 22px;
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 15px;
            margin-top: auto;
            animation: slideInLeft 0.6s ease-out 0.3s backwards;
        }

        .product-buttons {
            display: flex;
            gap: 10px;
            animation: fadeInUp 0.6s ease-out 0.4s backwards;
        }

        .btn-details {
            flex: 1;
            padding: 10px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn-details::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-details:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-details:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
        }

        .btn-contact {
            flex: 1;
            padding: 10px;
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
        }

        .btn-contact:hover {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }

        /* ===== LOADING ===== */
        .loading {
            text-align: center;
            padding: 50px;
            color: var(--primary-color);
        }

        .spinner {
            border: 4px solid var(--light-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: rotateIcon 1s linear infinite;
            margin: 0 auto 20px;
        }

        /* ===== MESSAGES ===== */
        .message {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideInDown 0.5s ease-out;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border-color: #28a745;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }

        .message.info {
            background: #d1ecf1;
            color: #0c5460;
            border-color: #bee5eb;
        }

        /* ===== FOOTER ===== */
        footer {
            background: var(--dark-color);
            color: white;
            padding: 40px 0 20px;
            margin-top: 60px;
            animation: slideInUp 1s ease-out;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section {
            animation: fadeInUp 0.8s ease-out backwards;
        }

        .footer-section:nth-child(1) { animation-delay: 0.1s; }
        .footer-section:nth-child(2) { animation-delay: 0.2s; }
        .footer-section:nth-child(3) { animation-delay: 0.3s; }
        .footer-section:nth-child(4) { animation-delay: 0.4s; }

        .footer-section h5 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s;
            position: relative;
        }

        .footer-section a::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-section a:hover::before {
            width: 100%;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 13px;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 32px;
            }

            .search-bar {
                flex-direction: column;
            }

            .filters {
                flex-direction: column;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== UTILITY CLASSES ===== */
        .container-custom {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn-primary-action {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-action::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s;
            z-index: -1;
        }

        .btn-primary-action:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
        }

        .btn-primary-action:hover::before {
            left: 100%;
        }

        .no-products {
            text-align: center;
            padding: 60px 20px;
            color: #999;
            animation: fadeInUp 0.8s ease-out;
        }

        .no-products i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
            animation: bounce 2s infinite;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-custom">
            <a class="navbar-brand" href="#">
                <i class="fas fa-industry"></i> B2B Machinery
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#products">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero">
        <div class="container-custom">
            <h1><i class="fas fa-search-plus"></i> Find Industrial Equipment</h1>
            <p>Connect with trusted suppliers of machinery and equipment worldwide</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-custom">
        <!-- Search Section -->
        <div class="search-section">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search machinery, suppliers, or specifications...">
                <button onclick="searchProducts()"><i class="fas fa-search"></i> Search</button>
                <button class="btn-primary-action" id="scrapeBtn" onclick="scrapeAlibaba()" style="background: var(--success-color);">
                    <i class="fas fa-sync-alt"></i> Refresh Data
                </button>
            </div>
        </div>

        <!-- Stats Section -->
        <div class="stats" id="stats" style="display: none;">
            <div class="stat-card">
                <div class="stat-number" id="totalProducts">0</div>
                <div class="stat-label">Total Products</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalSuppliers">0</div>
                <div class="stat-label">Suppliers</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalCategories">0</div>
                <div class="stat-label">Categories</div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-group">
                <label>Product Type</label>
                <select id="productType">
                    <option value="">All Types</option>
                    <option value="cnc">CNC Machines</option>
                    <option value="lathe">Lathes</option>
                    <option value="drill">Drills</option>
                    <option value="press">Presses</option>
                    <option value="grinder">Grinders</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Location</label>
                <select id="location">
                    <option value="">All Locations</option>
                    <option value="china">China</option>
                    <option value="india">India</option>
                    <option value="usa">USA</option>
                    <option value="germany">Germany</option>
                    <option value="japan">Japan</option>
                    <option value="taiwan">Taiwan</option>
                </select>
            </div>
            <div class="filter-group">
                <button class="btn-primary-action" onclick="applyFilters()" style="width: 100%;">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
            </div>
        </div>

        <!-- Messages -->
        <div id="message" style="display: none;"></div>

        <!-- Loading State -->
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Loading products...</p>
        </div>

        <!-- Products Grid -->
        <div id="productsContainer" class="products-grid"></div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container-custom">
            <div class="footer-content">
                <div class="footer-section">
                    <h5><i class="fas fa-industry"></i> B2B Machinery</h5>
                    <p>Your trusted marketplace for industrial equipment and machinery suppliers worldwide.</p>
                </div>
                <div class="footer-section">
                    <h5>Quick Links</h5>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Products</a></li>
                        <li><a href="#">Suppliers</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h5>Categories</h5>
                    <ul>
                        <li><a href="#">CNC Machines</a></li>
                        <li><a href="#">Lathes</a></li>
                        <li><a href="#">Drills</a></li>
                        <li><a href="#">Presses</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h5>Contact Us</h5>
                    <p>Email: info@b2bmachinery.com</p>
                    <p>Phone: +1-800-MACHINERY</p>
                    <p>Address: 123 Industrial Way, Tech City</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 B2B Machinery Marketplace. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
        const API_BASE = 'http://localhost:5000/api';
        let allProducts = [];

        function showMessage(text, type = 'info') {
            const messageDiv = document.getElementById('message');
            const icons = {
                'success': 'fa-check-circle',
                'error': 'fa-exclamation-circle',
                'info': 'fa-info-circle'
            };
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `<i class="fas ${icons[type]}"></i> <span>${text}</span>`;
            messageDiv.style.display = 'block';
            
            if (type !== 'error') {
                setTimeout(() => {
                    messageDiv.style.display = 'none';
                }, 4000);
            }
        }

        async function fetchProducts(filters = {}) {
            const loading = document.getElementById('loading');
            loading.style.display = 'block';
            
            try {
                let url = `${API_BASE}/products?`;
                if (filters.category) url += `category=${encodeURIComponent(filters.category)}&`;
                if (filters.location) url += `location=${encodeURIComponent(filters.location)}&`;
                if (filters.search) url += `search=${encodeURIComponent(filters.search)}&`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success) {
                    allProducts = data.products;
                    displayProducts(data.products);
                    updateStats();
                } else {
                    showMessage('Failed to fetch products', 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showMessage('Unable to connect to server', 'error');
            } finally {
                loading.style.display = 'none';
            }
        }

        async function updateStats() {
            try {
                const response = await fetch(`${API_BASE}/stats`);
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('totalProducts').textContent = data.total_products;
                    document.getElementById('totalSuppliers').textContent = data.total_suppliers;
                    document.getElementById('totalCategories').textContent = Object.keys(data.categories).length;
                    document.getElementById('stats').style.display = 'grid';
                }
            } catch (error) {
                console.error('Stats error:', error);
            }
        }

        function displayProducts(productsToDisplay) {
            const container = document.getElementById('productsContainer');
            container.innerHTML = '';

            if (productsToDisplay.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1;">
                        <div class="no-products">
                            <i class="fas fa-inbox"></i>
                            <h4>No Products Found</h4>
                            <p>Try adjusting your filters or search terms</p>
                        </div>
                    </div>
                `;
                return;
            }

            productsToDisplay.forEach((product, index) => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">
                        <i class="fas fa-industry"></i>
                        <div class="product-badge">${(product.category || 'PRODUCT').toUpperCase()}</div>
                    </div>
                    <div class="product-info">
                        <div class="product-name">${product.product_name || 'Unknown'}</div>
                        <div class="product-supplier">
                            <i class="fas fa-building"></i> ${product.supplier || 'Unknown Supplier'}
                        </div>
                        <div class="product-rating">
                            <i class="fas fa-star"></i> ${(product.rating || 4.5).toFixed(1)}/5.0
                        </div>
                        <div class="product-price">${product.price_usd || '$0.00'}</div>
                        <div class="product-buttons">
                            <button class="btn-details" onclick="viewDetails(${product.id})">
                                <i class="fas fa-eye"></i> Details
                            </button>
                            <button class="btn-contact" onclick="openContactForm(${product.id})">
                                <i class="fas fa-envelope"></i> Contact
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }

        function searchProducts() {
            const query = document.getElementById('searchInput').value;
            fetchProducts({ search: query });
        }

        function applyFilters() {
            const productType = document.getElementById('productType').value;
            const location = document.getElementById('location').value;

            fetchProducts({
                category: productType,
                location: location
            });
        }

        async function scrapeAlibaba() {
            const btn = document.getElementById('scrapeBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
            
            try {
                const response = await fetch(`${API_BASE}/scrape`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });

                const data = await response.json();
                
                if (data.success) {
                    showMessage(`âœ“ ${data.message}`, 'success');
                    fetchProducts();
                } else {
                    showMessage(`âœ— ${data.message || data.error}`, 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showMessage('Failed to refresh data', 'error');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Data';
            }
        }

        function viewDetails(id) {
            const product = allProducts.find(p => p.id === id);
            if (product) {
                alert(`
ðŸ“¦ PRODUCT DETAILS
${'-'.repeat(50)}
Name: ${product.product_name}
Supplier: ${product.supplier}
Price: ${product.price_usd}
Category: ${product.category}
Location: ${product.location}
Min Order: ${product.min_order}
Rating: ${(product.rating || 4.5).toFixed(1)}/5.0
Description: ${product.description || 'N/A'}
Specs: ${product.specs || 'N/A'}
                `);
            }
        }

        function openContactForm(id) {
            const product = allProducts.find(p => p.id === id);
            if (!product) {
                showMessage('Product not found', 'error');
                return;
            }

            const buyerName = prompt('Enter your name:');
            if (!buyerName) return;

            const buyerEmail = prompt('Enter your email:');
            if (!buyerEmail) return;

            const message = prompt('Enter your message:');
            if (!message) return;

            sendContactRequest(id, buyerName, buyerEmail, message);
        }

        async function sendContactRequest(productId, name, email, message) {
            try {
                const response = await fetch(`${API_BASE}/contact`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        product_id: productId,
                        buyer_name: name,
                        buyer_email: email,
                        message: message
                    })
                });

                const data = await response.json();
                if (data.success) {
                    showMessage('âœ“ ' + data.message, 'success');
                } else {
                    showMessage('âœ— Error: ' + (data.error || 'Unknown error'), 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showMessage('Error sending contact request', 'error');
            }
        }

        // Initialize on page load
        window.addEventListener('load', function() {
            fetchProducts();
        });
    </script>
</body>
</html>